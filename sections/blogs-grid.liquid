<section id="{{ section.id }}">
  {%- assign articles_per_page = 2 -%}
  <ul id="article-list">
    {%- for article in blog.articles -%}
      <li class="article-item" style="display:none;">
        <a href="{{ article.url }}">{{ article.title }}</a>
        {%- if article.tags.size > 0 -%}
          <span>
            â€”
            {%- for tag in article.tags -%}
              {{ tag -}}
              {%- unless forloop.last %}, {% endunless %}
            {%- endfor -%}
          </span>
        {%- endif -%}
      </li>
    {%- endfor -%}
  </ul>

  <div id="pagination"></div>

  <script>
    (function() {
      var items = document.querySelectorAll('#article-list .article-item');
      var perPage = {{ articles_per_page }};
      var currentPage = 1;
      var totalPages = Math.ceil(items.length / perPage);
      var pagination = document.getElementById('pagination');

      function showPage(page) {
        currentPage = page;
        items.forEach(function(item, index) {
          item.style.display = (index >= (page - 1) * perPage && index < page * perPage) ? '' : 'none';
        });
        renderPagination();
      }

      function renderPagination() {
        pagination.innerHTML = '';
        if (currentPage > 1) {
          var prev = document.createElement('a');
          prev.href = '#';
          prev.textContent = 'Previous';
          prev.onclick = function(e) { e.preventDefault(); showPage(currentPage - 1); };
          pagination.appendChild(prev);
        }
        for (let i = 1; i <= totalPages; i++) {
          let link = document.createElement('a');
          link.href = '#';
          link.textContent = i;
          if (i === currentPage) {
            link.style.fontWeight = 'bold';
          }
          link.onclick = function(e) { e.preventDefault(); showPage(i); };
          pagination.appendChild(link);
        }
        if (currentPage < totalPages) {
          var next = document.createElement('a');
          next.href = '#';
          next.textContent = 'Next';
          next.onclick = function(e) { e.preventDefault(); showPage(currentPage + 1); };
          pagination.appendChild(next);
        }
      }

      showPage(1);
    })();
  </script>
</section>

{% schema %}
{
  "name": "Simple Blog List",
  "settings": [
    {
      "type": "number",
      "id": "blogs_per_page",
      "label": "Number of articles to show",
      "default": 7
    }
  ],
  "presets": [
    {
      "name": "Simple Blog List"
    }
  ]
}
{% endschema %}
